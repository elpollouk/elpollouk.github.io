// ChickenVis
// Version: 0.9.0-dev
// Built: 2016-09-21T22:57:43.410Z
// Commit: ffd51bf060e72f9552ddeaf66ee941a1b5dd3ac6

"use strict";Chicken.register("ChickenVis.createElement",function(t){return document.createElement(t)}),Chicken.register("ChickenVis.requestAnimationFrame",function(t){return window.requestAnimationFrame(t)}),Chicken.register("ChickenVis.resolveElement",function(t){switch(typeof t){case"string":return document.getElementById(t);case"function":return t();default:return t}}),Chicken.register("ChickenVis.Loader",["ChickenVis.createElement"],function(t){var e={},n=Chicken.Class(function(){this.numReady=0,this.numTotal=0,this.failed=[],this.a={}},{queue:function(t,e){var i=this;i.numTotal+=t.length;for(var r=0;r<t.length;r++){var s=n.load(t[r].source,t[r].type,function(t){switch(t.state){case n.STATE_READY:i.numReady++;break;case n.STATE_ERROR:i.failed.push(t)}e(t,i)});s.id=t[r].id,i.a[s.id]=s}},getInfo:function(t){return this.a[t]},getData:function(t){var e=this.a[t];if(e)return e.state!==n.STATE_READY?null:e.data}},{},{TYPE_IMAGE:"img",TYPE_TEXT:"text",STATE_QUEUED:0,STATE_READY:1,STATE_ERROR:-1,load:function(t,i,r){var s={type:i,source:t,state:n.STATE_QUEUED,onStateChange:r};return e[i](s),s},registerLoader:function(t,n){e[t]=n}});return n.registerLoader(n.TYPE_IMAGE,function(e){e.data=t("img"),e.data.src=e.source,e.data.onload=function(){e.state=n.STATE_READY,e.onStateChange(e)},e.data.onerror=function(){e.state=n.STATE_ERROR,e.onStateChange(e)}}),n}),Chicken.register("ChickenVis.Loader.textLoader",["ChickenVis.Loader","XMLHttpRequest"],function(t,e){function n(n){var i=new e;i.onload=function(){n.data=i.responseText,n.state=t.STATE_READY,n.onStateChange(n)},i.onerror=function(){n.state=t.STATE_ERROR,n.onStateChange(n)},i.open("GET",n.source,!0),i.send()}return t.registerLoader(t.TYPE_TEXT,n),n}),Chicken.register("ChickenVis.UpdateLoop",["ChickenVis.requestAnimationFrame","Date.now"],function(t,e){var n=10,i=Chicken.Class(function(i){if(!i)throw new Error("No update function specified");var r=this,s=function(){var a=e(),h=(a-r.b)/1e3;r.b=a;var o=r.c;o.push(h),o.length===n&&o.shift(),r.d||(i(h),t(s))};this.d=!0,this.e=0,this.f=s,this.g=i,this.c=[]},{step:function(t){this.g(t)}},{paused:{get:function(){return this.d},set:function(t){return t==this.d?t:(this.d=t,t||(this.b=e(),this.f()),t)},enumerable:!0},fps:{get:function(){for(var t=0,e=this.c,n=0;n<e.length;n++)t+=e[n];return 0===e?0:e.length/t},enumerable:!0}});return i}),Chicken.register("ChickenVis.Draw",["ChickenVis.resolveElement"],function(t){var e="black",n="10px Courier",i=2*Math.PI,r=function(){return!1},s=Chicken.Class(function(e,n,i){e=t(e),this.h=0,this.i=0,this.j=document.createElement("canvas"),this.j.onselectstart=r,this.k=this.j.getContext("2d"),this.resize(n||e.clientWidth,i||e.clientHeight),e.appendChild(this.j)},{resize:function(t,e){this.l=t,this.m=e,this.j.width=this.l,this.j.height=this.m,this.k.textBaseline="top",this.k.translate(-this.h,-this.i)},setOrigin:function(t,e){this.h=-t,this.i=-e,this.k.translate(t,e)},line:function(t,n,i,r,s){s=s||e,this.k.beginPath(),this.k.moveTo(t,n),this.k.lineTo(i,r),this.k.strokeStyle=s,this.k.stroke()},path:function(t,n){n=n||e;var i=this.k;i.beginPath(),i.moveTo(t[0].x,t[0].y);for(var r=t.length,s=1;r>s;s++)i.lineTo(t[s].x,t[s].y);i.strokeStyle=n,i.stroke()},circle:function(t,n,r,s,a){s=s||e,this.k.beginPath(),this.k.arc(t,n,r,0,i),a?(this.k.strokeStyle=s,this.k.stroke()):(this.k.fillStyle=s,this.k.fill())},rect:function(t,n,i,r,s,a){s=s||e,a?(this.k.beginPath(),this.k.rect(t,n,i,r),this.k.strokeStyle=s,this.k.stroke()):(this.k.fillStyle=s,this.k.fillRect(t,n,i,r))},image:function(t,e,n){this.k.drawImage(t,e,n)},imageEx:function(t,e,n,i,r,s,a,h,o){this.k.drawImage(t,e,n,i,r,s,a,h,o)},text:function(t,i,r,s,a){s=s||e,a=a||n,this.k.font=a,this.k.fillStyle=s,this.k.fillText(t,i,r)},clear:function(){this.k.clearRect(this.h,this.i,this.l,this.m)},save:function(){this.k.save()},restore:function(){this.k.restore()},translate:function(t,e){this.k.translate(t,e)},rotate:function(t){this.k.rotate(t)},scale:function(t,e){this.k.scale(t,e||t)}},{canvas:{get:function(){return this.j},enumerable:!0},context:{get:function(){return this.k},enumerable:!0},width:{get:function(){return this.l},enumerable:!0},height:{get:function(){return this.m},enumerable:!0}});return s}),Chicken.register("ChickenVis.FixedDeltaUpdater",[],function(){var t=Chicken.Class(function(t,e){this.g=t,this.n=e,this.reset()},{reset:function(){this.o=0,this.p=0},update:function(t){for(this.p+=t,t=this.n;this.p>=t;)this.g(t,this.o),this.o+=t,this.p-=t}},{deltaTime:{get:function(){return this.n},enumerable:!0},currentTime:{get:function(){return this.o},enumerable:!0}});return t}),Chicken.register("ChickenVis.Math",[],function(){for(var t=.25*Math.PI,e=.5*Math.PI,n=2*Math.PI,i={QUARTER_PI:t,HALF_PI:e,TWO_PI:n,degreesToRads:function(t){return t*n/360},radsToDegrees:function(t){return 360*t/n},randomInt:function(t){return Math.floor(Math.random()*t)},randomRange:function(t,e){return Math.random()*(e-t)+t},randomRangeInt:function(t,e){return Math.floor(i.randomRange(t,e))},vector2:function(t,e){return{x:t,y:e}},clone2:function(t){return{x:t.x,y:t.y}},length2:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},lengthSqrd2:function(t){return t.x*t.x+t.y*t.y},dot2:function(t,e){return t.x*e.x+t.y*e.y},angleBetween2:function(t,e){return Math.atan2(t.y,t.x)-Math.atan2(e.y,e.x)},distanceBetween2:function(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},distanceBetweenSqrd2:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},add2:function(t,e){t.x+=e.x,t.y+=e.y},addAndClone2:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},sub2:function(t,e){t.x-=e.x,t.y-=e.y},subAndClone2:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},normalise2:function(t){if(0!==t.x||0!==t.y){var e=i.length2(t);t.x/=e,t.y/=e}},normaliseAndClone2:function(t){if(0===t.x&&0===t.y)return{x:0,y:0};var e=i.length2(t);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},scale2:function(t,e){t.x*=e,t.y*=e},scaleAndClone2:function(t,e){return{x:t.x*e,y:t.y*e}},scaleAdd2:function(t,e,n){t.x+=e.x*n,t.y+=e.y*n},slerp2:function(t,e,n){t.x+=(e.x-t.x)*n,t.y+=(e.y-t.y)*n},slerpAndClone2:function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}},rotate2:function(t,e){var n=t.x,i=t.y,r=Math.cos(e),s=Math.sin(e);t.x=r*n+s*i,t.y=r*i-s*n}},r=Object.getOwnPropertyNames(Math),s=0;s<r.length;s++)i[r[s]]=Math[r[s]];return i}),Chicken.register("ChickenVis.SpritePallette",[],function(){var t=Chicken.Class(function(t,e,n){if(this.q=t,this.r=e,this.s=n,this.k=n.context,!this.k&&n.getContext&&(this.k=n.getContext("2d")),!this.k&&n.drawImage&&(this.k=n),!this.k)throw new Error("Unable to determine target type")},{draw:function(t,e,n,i,r){var s=this.r[t];i=i||s.w,r=r||s.h,this.k.drawImage(this.q,s.x,s.y,s.w,s.h,e,n,i,r)},drawArray:function(t,e){var n,i,r,s,a=this.k,h=this.r,o=this.q;e=e||t.length;for(var u=0;e>u;u++)n=t[u],i=h[n.id],r=n.w||i.w,s=n.h||i.h,a.drawImage(o,i.x,i.y,i.w,i.h,n.x,n.y,r,s)},hasSprite:function(t){return t in this.r}},{img:{get:function(){return this.q},enumerable:!0},map:{get:function(){return this.r},enumerable:!0},target:{get:function(){return this.s},enumerable:!0},context:{get:function(){return this.k},enumerable:!0}});return t});